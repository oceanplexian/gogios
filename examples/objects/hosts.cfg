###############################################################################
# Hosts
#
# Topology:
#
#   gateway (10.0.0.1)
#     |
#     +-- gogios-server (127.0.0.1)     <-- this machine
#     +-- google-dns (8.8.8.8)          <-- external connectivity check
#     +-- web-01 (127.0.0.1)            <-- simulated web server (localhost)
#     +-- db-01 (127.0.0.1)             <-- simulated db server (localhost)
#     +-- dead-host (192.0.2.1)         <-- RFC 5737 TEST-NET, will fail
#
# Most hosts point at 127.0.0.1 so checks actually work. dead-host uses
# a reserved IP so you can watch it go DOWN -> HARD and fire notifications.
#
###############################################################################

define host {
    use                     network-device
    host_name               gateway
    alias                   Default Gateway
    address                 10.0.0.1
    contact_groups          admins
    notes                   Network gateway. If this is down, everything is down.
}

define host {
    use                     linux-server
    host_name               gogios-server
    alias                   Monitoring Server
    address                 127.0.0.1
    parents                 gateway
    contact_groups          admins
    notes                   The box running gogios itself. Checks target localhost.
}

define host {
    use                     generic-host
    host_name               google-dns
    alias                   Google Public DNS
    address                 8.8.8.8
    parents                 gateway
    contact_groups          admins
    notes                   External connectivity canary. If this is unreachable, check your uplink.
}

define host {
    use                     linux-server
    host_name               web-01
    alias                   Web Server 01
    address                 127.0.0.1
    parents                 gateway
    contact_groups          admins,oncall
    notes                   Primary web server. HTTP check will fail unless something is listening on :80.
    event_handler           handle-host-event
}

define host {
    use                     linux-server
    host_name               db-01
    alias                   Database Server 01
    address                 127.0.0.1
    parents                 gateway
    contact_groups          admins,oncall
    notes                   Primary database server. PostgreSQL check will fail unless pg is running.
}

# This host uses a TEST-NET IP (RFC 5737) that is guaranteed unroutable.
# It will go DOWN, transition through SOFT states, hit HARD, and fire
# notifications. That's the whole point.
define host {
    use                     linux-server
    host_name               dead-host
    alias                   Intentionally Unreachable Host
    address                 192.0.2.1
    parents                 gateway
    contact_groups          admins
    max_check_attempts      3
    notes                   Uses TEST-NET-1 (RFC 5737). Will always be DOWN. Demonstrates SOFT->HARD transitions and notifications.
}
