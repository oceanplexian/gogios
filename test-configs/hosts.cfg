###############################################################################
# HOSTS.CFG - Host definitions with parent/child relationships
###############################################################################

#
# NETWORK INFRASTRUCTURE (top of dependency tree)
#

# Core router
define host {
    use                     network-device
    host_name               core-router
    alias                   Core Router
    address                 10.0.0.1
    ; no parents - top of tree
    icon_image              router.png
    statusmap_image         router.gd2
    2d_coords               300,50
}

# Distribution switch 1
define host {
    use                     network-device
    host_name               dist-switch-01
    alias                   Distribution Switch 01
    address                 10.0.1.1
    parents                 core-router
    2d_coords               150,150
}

# Distribution switch 2
define host {
    use                     network-device
    host_name               dist-switch-02
    alias                   Distribution Switch 02
    address                 10.0.2.1
    parents                 core-router
    2d_coords               450,150
}

#
# LINUX SERVERS (behind dist-switch-01)
#

# Web server cluster
define host {
    use                     linux-server
    host_name               web-01
    alias                   Web Server 01 (Primary)
    address                 10.0.1.10
    parents                 dist-switch-01
    contact_groups          admins,developers
    notes                   Primary web server - Apache/Nginx
    notes_url               https://wiki.example.com/hosts/web-01
    action_url              https://grafana.example.com/d/web-01
}

define host {
    use                     linux-server
    host_name               web-02
    alias                   Web Server 02 (Secondary)
    address                 10.0.1.11
    parents                 dist-switch-01
    contact_groups          admins,developers
}

# Application servers
define host {
    use                     linux-server
    host_name               app-01
    alias                   Application Server 01
    address                 10.0.1.20
    parents                 dist-switch-01
    contact_groups          admins,developers
}

define host {
    use                     linux-server
    host_name               app-02
    alias                   Application Server 02
    address                 10.0.1.21
    parents                 dist-switch-01
}

#
# CRITICAL SERVERS (behind dist-switch-02)
#

# Database servers (using critical-server template for tighter monitoring)
define host {
    use                     critical-server
    host_name               db-master
    alias                   Database Master (PostgreSQL)
    address                 10.0.2.10
    parents                 dist-switch-02
    contact_groups          admins,managers,dbas
}

define host {
    use                     critical-server
    host_name               db-replica
    alias                   Database Replica (PostgreSQL)
    address                 10.0.2.11
    parents                 dist-switch-02
    contact_groups          admins,dbas
}

# Mail server
define host {
    use                     linux-server
    host_name               mail-01
    alias                   Mail Server (Postfix/Dovecot)
    address                 10.0.2.20
    parents                 dist-switch-02
}

# Monitoring server (self)
define host {
    use                     linux-server
    host_name               nagios-server
    alias                   Nagios Monitoring Server
    address                 127.0.0.1
    parents                 dist-switch-02
}

#
# WINDOWS SERVERS
#

define host {
    use                     windows-server
    host_name               win-dc-01
    alias                   Windows Domain Controller 01
    address                 10.0.2.30
    parents                 dist-switch-02
}

#
# HOST WITH CUSTOM CHECK SETTINGS
#

# DMZ host with custom timeouts and intervals
define host {
    use                     linux-server
    host_name               dmz-proxy
    alias                   DMZ Reverse Proxy
    address                 10.0.3.10
    parents                 core-router
    check_command           check_ping!100.0,20%!500.0,60%
    check_interval          2
    retry_interval          1
    max_check_attempts      5
    notification_interval   10
    notification_options    d,u,r,f,s
    contact_groups          admins,managers
    flap_detection_options  o,d,u
    stalking_options        o,d
}
